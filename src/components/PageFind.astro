---
---

<div id="search" transition:persist="pagefind" class="px-2 mb-8 min-h-[3rem]"></div>

<script is:inline>
   // Make script inline so that Astro leaves it as is 
   // and we can access normal DOM lifecycles

   ///////////////
   // PAGEFIND //
   //////////////

   // attach DOM loading event to document so Pagefind is created right then and there
   // and then is able to be tracked by Astro using the `transition:persist` directive
   document.addEventListener('DOMContentLoaded', () => {

      new PagefindUI({
         element: "#search",
         showSubResults: false
      });
   });

</script>

<style is:global>
   .pagefind-ui__search-input {
      @apply !h-12 
   }

   .pagefind-ui__search-clear {
      @apply !bg-transparent
   }

   .pagefind-ui__result {
      @apply !flex-row
   }

   .pagefind-ui__result-thumb {
      width: min(100%,calc((100% - (100px * var(--pagefind-ui-scale))) * 100000)) !important;
      max-width: 12rem !important;
      aspect-ratio: initial !important;
   }

   .pagefind-ui__result-image {
      left: unset !important;
      @apply !relative !max-h-none !transform-none
   }

   @media (min-width: 768px) {
      .pagefind-ui__result {
         @apply !flex-col
      }
   }

   @media (min-width: 1536px) {
      .pagefind-ui__result {
         @apply !flex-row
      }
   }
   
</style>

<style is:global>
   :root {
      --pagefind-ui-background: rgba(255, 255, 255, 0.3);
      --pagefind-ui-border: rgba(0, 0, 0, 0.1);
      --pagefind-ui-tag: rgba(255, 255, 255, 0.6);
      --pagefind-ui-border-radius: 0.5rem;
   }

	.dark {
		--pagefind-ui-primary: #eeeeee;
		--pagefind-ui-text: #eeeeee;
		--pagefind-ui-background: rgba(0, 0, 0, 0.3);
		--pagefind-ui-border: rgba(255, 255, 255, 0.1);
		--pagefind-ui-tag: rgba(0, 0, 0, 0.6);
	}
</style>