---
// import components
import ImageWrapper from "./ImageWrapper.astro";
import ArtDetails from "./ArtDetails.astro";

// import utils
import { truncateTextToPeriod } from "../utils/textTools";

const { title, date, tags, href, images, description } = Astro.props;

---

<article class="prose max-w-none dark:prose-invert dark:prose-p:text-gray-100">
   <div class="px-4">
      <h1 class="mb-3 text-4xl sm:text-5xl md:mb-3">{title}</h1>
      <ArtDetails date={date} tags={tags} />
   </div>
   <div class="sm:px-4">
      <a href={href}>
         {  
            () => { 
               if (!Array.isArray(images)) {
                  return (
                     <ImageWrapper 
                        src={images.image} 
                        alt={images.image_alt} 
                        quality={50}
                        classes={"relative transition transition-translate ease-in-out delay-75 duration-300 hover:shadow-2xl hover:shadow-slate-500/80 hover:translate-x-1 hover:-translate-y-1"} 
                     />
                  )
               } else {
                  images.map(({image, image_alt}) => {
                     return (
                        <ImageWrapper 
                           src={image} 
                           alt={image_alt} 
                           quality={50}
                           classes={""} 
                        />
                     )
                  })
               }
            }
         }
         
      </a>
   </div>
   {
      description && 
      <div class="px-4">
         <p class="flex flex-col p-3 rounded-md bg-slate-50 dark:bg-slate-800">
            {truncateTextToPeriod(description)}
            <a href={href} class="no-underline text-sm font-bold font-sans mt-2 ml-auto transition-colors hover:text-gray-400 dark:hover:text-gray-300">Read More</a>
         </p>
      </div>
   }
</article>