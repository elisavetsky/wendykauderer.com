---
// import components
import ImageWrapper from "./ImageWrapper.astro";
import SoldMarker from"./SoldMarker.jsx";

// import siteconfig
import { frontmatter } from "../configuration/SitewideConfig.md";
const curvedEdges = frontmatter.curved_image_edges;

// import utils
import { truncateText } from "../utils/textTools";


const { 
   sold, 
   title, 
   date, 
   artType, 
   tags, 
   href, 
   mainImage,
   description, 
   showFullDescription,
   loading,
   classes,
   ...props
} = Astro.props;
---

<div class="max-w-none">
   <a href={href}>
      <div 
         class={`relative overflow-hidden sm:px-0 transition transition-translate ease-in-out delay-75 duration-300 hover:shadow-xl hover:shadow-black/20 dark:hover:shadow-black/50 sm:hover:translate-x-px sm:hover:-translate-y-1 ${curvedEdges && "sm:rounded-md"}`}
      >
         <ImageWrapper 
            src={mainImage.src} 
            alt={mainImage.alt} 
            width={640}
            quality={50}
            loading={loading ?? "lazy"}
            classes={`${classes} min-w-[100%] `} 
            {...props}
         />
         <SoldMarker sold={sold} />
      </div>
   </a> 
   
      
      <!-- {() => { 
         if (!Array.isArray(images)) {
            return (
               <a href={href}>
                  <ImageWrapper 
                     src={images.image} 
                     alt={images.image_alt} 
                     quality={50}
                     classes={"w-full relative transition transition-translate ease-in-out delay-75 duration-300 hover:shadow-2xl hover:shadow-black/20 dark:hover:shadow-slate-700 sm:hover:translate-x-1 sm:hover:-translate-y-1"} 
                  />
               </a> 
            )
         } else {
            return images.map(({image, image_alt}) => {
               return (
                  <a href={href}>
                     <ImageWrapper 
                        src={image} 
                        alt={image_alt} 
                        quality={50}
                        classes={""} 
                     />
                  </a>
               )
            })
         }
      }} -->

   <!-- {description && 
      <div class="px-4">
         <p class="flex flex-col p-3 rounded-md prose max-w-none dark:prose-invert bg-slate-50 dark:bg-slate-800">
            {() => {
               if (showFullDescription) {
                  return <> {description} </>;
               } else {
                  return (
                     <>
                        {truncateText(description)}
                        <a href={href} class="no-underline text-sm font-bold font-sans mt-2 ml-auto transition-colors hover:text-gray-400 dark:hover:text-gray-300">Read More</a>
                     </>
                  )
               }
            }}
         </p>
      </div>
   } -->
</div>