---
// Import packages
import slugify from '@sindresorhus/slugify';

// Expose site configuration for CMS
import { frontmatter } from "../configuration/SitewideConfig.md";
const sections = frontmatter.sections;

// import components
import PageFind from './PageFind.astro';
import ThemeDropdown from './ThemeDropdown.jsx';
import Link from './Link.jsx';
import ArtTypes from './ArtTypes.astro';
---

<nav aria-label="Main menu" id="main-menu" class="hidden text-md font-normal md:active md:transition-none md:duration-0 md:m-0 md:flex md:flex-col md:pr-2">
   
   <div class="flex flex-col justify-between leading-loose mb-4 w-full md:gap-0 md:mb-8">

      <PageFind />

      <ul class="flex flex-col gap-1">
      {sections?.map(({title, dropdown_items}) => {
         return (
            <li
               
               class={`${dropdown_items ? "dropdown-container" : "" } text-md inline-flex flex-col items-start `}
            >
               
               {dropdown_items ?
               // <button 
               //    aria-haspopup="true"
               //    class={`dropdown-trigger py-1 px-4 transition-colors hover:text-slate-800 dark:hover:text-slate-100`}
               // >
               //    {title}
               // </button>
               <ul 
                  class={`dropdown-menu transition-colors relative gap-2 z-10 left-0 rounded-lg bottom-0 w-full md:left-[unset] flex flex-wrap px-1 py-2 mb-4 items-center`}>
                  <ArtTypes />
               </ul>
               // <Dropdown items={dropdown_items} />
               :
               <Link
                  href={`/${slugify(title)}`}
                  size="md"
                  transition="transition"
                  classes={
                     `${Astro.url.pathname.split("/")[1] === slugify(title) ? "underline underline-offset-4 decoration-2 decoration-inherit" : "decoration-transparent"} hover:decoration-inherit`
                  }
               >
                  {title}
               </Link>
               }
               
            </li>
         )
      })}
      <li class="mt-2">
         <ThemeDropdown client:only="react" transition:persist />
      </li>
      </ul>
   </div>
   
</nav>