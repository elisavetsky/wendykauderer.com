---
// Import packages
import slugify from '@sindresorhus/slugify';

// Expose site configuration for CMS
import { frontmatter } from "../configuration/SitewideConfig.md";
import { navArtTypes, navLinks, additionalNavLinks } from './NavigationLinks.jsx';

// import components
import PageFind from './PageFind.astro';
import ThemeDropdown from './ThemeDropdown.jsx';
import Link from './Link.jsx';
import ArtTypes from './ArtTypes.astro';
import { titleCase } from '../utils/textTools';
---

<nav aria-label="Main menu" id="main-menu" class="hidden text-md font-normal md:active md:transition-none md:duration-0 md:m-0 md:flex md:flex-col md:pr-2">
   
   <div class="flex flex-col justify-between leading-loose mb-4 w-full md:gap-0 md:mb-8">

      <PageFind />

      <ul class="flex flex-col gap-1">
         <li class={`text-md inline-flex flex-col items-start`}>
            <ul class={`dropdown-menu transition-colors relative gap-2 z-10 left-0 rounded-lg bottom-0 w-full md:left-[unset] flex flex-wrap px-1 py-2 mb-4 items-center`}>
               <ArtTypes />
            </ul>
         </li>

      {navLinks?.map(({title, href}) => {
         return (
            <li class={`inline-flex flex-col items-start`}>
               <Link
                  href={`/${slugify(title)}`}
                  size="md"
                  transition="transition"
                  classes={
                     `${Astro.url.pathname.split("/")[1] === slugify(title) ? "underline underline-offset-4 decoration-2 decoration-inherit" : "decoration-transparent"} hover:decoration-inherit`
                  }
               >
                  {title}
               </Link>
            </li>      
         )
      })}
         <li class="mt-4">
            <ul class="flex flex-col gap-1">
               {additionalNavLinks?.map(({title, href}) => {
                  return (
                     <li class={`text-sm inline-flex flex-col items-start `}>
                        <Link
                           href={href}
                           size="sm"
                           transition="transition"
                           classes={
                              `${Astro.url.pathname.split("/")[1] === slugify(title) ? "underline underline-offset-4 decoration-2 decoration-inherit" : "decoration-transparent"} hover:decoration-inherit`
                           }
                        >
                           {title}
                        </Link>
                     </li>
                  )
               })}
            </ul>
         </li>
         
         <li class="mt-2">
            <ThemeDropdown client:only="react" transition:persist />
         </li>
      </ul>
   </div>
   
</nav>